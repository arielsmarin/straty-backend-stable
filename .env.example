# Environment Variables Configuration

# This file documents all environment variables used in the application.
# Copy this to .env for local development, and set in Render/Cloudflare for production.

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=production  # or "development", "staging"

# ============================================================================
# STORAGE BACKEND
# ============================================================================
# Choose storage backend: "local" or "r2"
STORAGE_BACKEND=r2

# ============================================================================
# CLOUDFLARE R2 CONFIGURATION (when STORAGE_BACKEND=r2)
# ============================================================================
# Your Cloudflare Account ID
R2_ACCOUNT_ID=your_account_id_here

# R2 API credentials (from Cloudflare R2 dashboard)
R2_ACCESS_KEY_ID=your_access_key_id
R2_SECRET_ACCESS_KEY=your_secret_access_key

# R2 bucket name
R2_BUCKET_NAME=panoconfig360-tiles

# R2 endpoint URL (computed from account ID)
R2_ENDPOINT_URL=https://your_account_id.r2.cloudflarestorage.com

# Public URL for serving tiles (your CDN domain)
R2_PUBLIC_URL=https://cdn.example.com

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Comma-separated list of allowed origins
# Include your frontend domain and Cloudflare Pages preview deployments
CORS_ORIGINS=https://app.example.com,https://*.pages.dev,http://localhost:3000

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# Number of worker threads for tile uploads (default: 4)
TILE_WORKERS=4

# Maximum concurrent tile uploads
MAX_TILE_CONCURRENCY=8

# libvips thread concurrency (0 = auto-detect CPU cores, 1 = single-thread)
# VIPS_CONCURRENCY=0

# ============================================================================
# RATE LIMITING
# ============================================================================
# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Max requests per IP address
RATE_LIMIT_REQUESTS=10

# Rate limit period in seconds
RATE_LIMIT_PERIOD=1

# Redis URL for distributed rate limiting (optional)
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# REQUEST SIZE LIMITS
# ============================================================================
# Maximum upload size in MB
MAX_UPLOAD_SIZE_MB=10

# ============================================================================
# LOGGING
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: "text" or "json"
LOG_FORMAT=json

# ============================================================================
# AUTHENTICATION (OPTIONAL)
# ============================================================================
# JWT authentication
# JWT_SECRET_KEY=your-secret-key-min-32-characters
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION_MINUTES=60

# API Key authentication (comma-separated keys)
# API_KEYS=key1,key2,key3

# Signed URL secret (for private content)
# SIGNED_URL_SECRET=your-signed-url-secret

# ============================================================================
# ERROR TRACKING (OPTIONAL)
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://xxx@sentry.io/xxx

# ============================================================================
# MONITORING (OPTIONAL)
# ============================================================================
# New Relic
# NEW_RELIC_LICENSE_KEY=your-license-key
# NEW_RELIC_APP_NAME=panoconfig360-api

# ============================================================================
# FRONTEND CONFIGURATION (for frontend build)
# ============================================================================
# API base URL (used by frontend)
API_BASE_URL=https://api.example.com

# CDN base URL (used by frontend)
CDN_BASE_URL=https://cdn.example.com

# ============================================================================
# LOCAL DEVELOPMENT OVERRIDES
# ============================================================================
# For local development, you can use local storage:
# STORAGE_BACKEND=local
# CORS_ORIGINS=http://localhost:3000,http://localhost:8000
# LOG_LEVEL=DEBUG
# RATE_LIMIT_ENABLED=false

# Optional root for CRUD catalog files (defaults to ./panoconfig360_cache/clients)
# PANOCONFIG360_CATALOG_ROOT=/absolute/path/to/panoconfig360_cache/clients
